<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Formulário de Ingrediente</title>
    <script>
        function atualizarCampos() {
            var tipo = document.getElementById("tipo").value;
            document.getElementById("seco-fields").style.display = (tipo === "seco") ? "block" : "none";
            document.getElementById("liquido-fields").style.display = (tipo === "liquido") ? "block" : "none";
            document.getElementById("unitario-fields").style.display = (tipo === "unitario") ? "block" : "none";
        }

        window.onload = function() {
            atualizarCampos();
            document.getElementById("tipo").addEventListener("change", atualizarCampos);
        };
    </script>
</head>
<body>
    <h1 th:text="${ingredienteForm.tipo != null} ? 'Editar Ingrediente' : 'Novo Ingrediente'">Título</h1>
    <form th:action="@{/ingredientes/salvar}" th:object="${ingredienteForm}" method="post">
        <label for="tipo">Tipo:</label>
        <select id="tipo" name="tipo" th:value="${ingredienteForm.tipo}" required>
            <option value="" disabled selected>Selecione o tipo</option>
            <option th:each="tipo : ${tipos}" th:value="${tipo}" th:text="${tipo.capitalize()}"
                    th:selected="${tipo == ingredienteForm.tipo}">Tipo</option>
        </select>
        <br/><br/>

        <label for="nome">Nome:</label>
        <input type="text" id="nome" th:field="*{nome}" required />
        <br/><br/>

        <label for="precoTotal">Preço Total:</label>
        <input type="number" step="0.01" id="precoTotal" th:field="*{precoTotal}" required />
        <br/><br/>

        <label for="organico">Orgânico:</label>
        <input type="checkbox" id="organico" th:field="*{organico}" />
        <br/><br/>

        <div id="seco-fields" style="display:none;">
            <label for="pesoLiquidoEmGramas">Peso Líquido em Gramas:</label>
            <input type="number" id="pesoLiquidoEmGramas" th:field="*{pesoLiquidoEmGramas}" min="0" />
            <br/><br/>
        </div>

        <div id="liquido-fields" style="display:none;">
            <label for="volumeLiquidoEmML">Volume Líquido em ML:</label>
            <input type="number" id="volumeLiquidoEmML" th:field="*{volumeLiquidoEmML}" min="0" />
            <br/><br/>
        </div>

        <div id="unitario-fields" style="display:none;">
            <label for="quantidadeUnidades">Quantidade de Unidades:</label>
            <input type="number" id="quantidadeUnidades" th:field="*{quantidadeUnidades}" min="0" />
            <br/><br/>
        </div>

        <button type="submit">Salvar</button>
        <a href="/ingredientes">Cancelar</a>
    </form>
</body>
</html>
